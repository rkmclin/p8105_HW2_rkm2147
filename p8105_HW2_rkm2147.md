HW2 Data Wrangling
================
Ronae McLin rkm2147
9/21/2020

``` r
library(tidyverse)
```

    ## ── Attaching packages ────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.1     ✓ dplyr   1.0.0
    ## ✓ tidyr   1.1.0     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ───────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

# Problem 1

Mr. Trash Wheel data

  - We will be importing the data, and then follow up by cleaning it.

<!-- end list -->

``` r
trash_df = readxl::read_excel("./trash_wheel.xlsx",                    range = "A2:N408") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

We are next going to read and clean precipitation data for 2017/2018.

``` r
rain_2018 = readxl::read_excel("./trash_wheel.xlsx",                    sheet = "2018 Precipitation",
        skip = 1) %>% 
        janitor::clean_names() %>% 
        drop_na(month) %>% 
        mutate(year = 2018) %>% 
        relocate(year)
  
rain_2017 = readxl::read_excel("./trash_wheel.xlsx",                    sheet = "2017 Precipitation",
        skip = 1) %>% 
        janitor::clean_names() %>% 
        drop_na(month) %>% 
        mutate(year = 2017) %>% 
        relocate(year)
```

Changing the variable of year into a complete month name and then
combining 2017 and 2018 into one table.

``` r
month_df = 
    tibble(
        month = 1:12,
        month_name = month.name
    )

rain_df = bind_rows(rain_2017, rain_2018)

rain_df =
    left_join(rain_df, month_df, by = "month") %>% 
  select(year, total, month_name) %>% 
  relocate(month_name)
```

The trash data frame contains information about the Mr.Trash Wheel trash
collector that is located in Baltimore, Maryland. There is a total of
344 rows in the data frame. The total amount of glass bottles collected
by Mr. Trash Wheel so far is 8724 and the total amount of plastic
bottles so far is 6.4436510^{5}. he median number of sports balls in
2017 was 8.

There is a total of 24 rows in the data frame. The total amount of
precipitation in 2018 was 70.33 inches.

# Problem 2

Convert the entry variable from character (YES vs NO) to a logical
variable (the ifelse or recode function may be useful).

Write a short paragraph about this dataset – explain briefly what
variables the dataset contains, describe your data cleaning steps so
far, and give the dimension (rows x columns) of the resulting dataset.
Are these data tidy?

Answer the following questions using these data:

How many distinct stations are there? Note that stations are identified
both by name and by line (e.g. 125th St A/B/C/D; 125st 1; 125st 4/5);
the distinct function may be useful here. How many stations are ADA
compliant? What proportion of station entrances / exits without vending
allow entrance? Reformat data so that route number and route name are
distinct variables. How many distinct stations serve the A train? Of the
stations that serve the A train, how many are ADA compliant?

``` r
transit_df = read_csv("./transit.csv") %>% janitor::clean_names() %>% 
  select(line, station_name,station_latitude, station_longitude,route1:route11, entry, vending,       entrance_type, ada) %>% 
  mutate(
     recode(entry, YES = "TRUE", NO = "FALSE"))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

# Problem 3

replace month number with month name; create a president variable taking
values gop and dem, and remove prez\_dem and prez\_gop; and remove the
day variable.

``` r
pols_df = read_csv("./538_data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year","month","day"))
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
polsmonth_df = 
    tibble(
        month = c("01","02","03","04","05","06","07","08","09","10","11","12"),
        month_name = month.name
    )

pols_df =
    left_join(pols_df, polsmonth_df, by = "month") %>% 
  mutate(
    president = prez_gop + prez_dem)  

select(pols_df, year, gov_gop, sen_gop, rep_gop, gov_dem, rep_dem, sen_dem, month_name, president) %>% 
  relocate(year,month_name)
```

    ## # A tibble: 822 x 9
    ##    year  month_name gov_gop sen_gop rep_gop gov_dem rep_dem sen_dem president
    ##    <chr> <chr>        <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>     <dbl>
    ##  1 1947  January         23      51     253      23     198      45         1
    ##  2 1947  February        23      51     253      23     198      45         1
    ##  3 1947  March           23      51     253      23     198      45         1
    ##  4 1947  April           23      51     253      23     198      45         1
    ##  5 1947  May             23      51     253      23     198      45         1
    ##  6 1947  June            23      51     253      23     198      45         1
    ##  7 1947  July            23      51     253      23     198      45         1
    ##  8 1947  August          23      51     253      23     198      45         1
    ##  9 1947  September       23      51     253      23     198      45         1
    ## 10 1947  October         23      51     253      23     198      45         1
    ## # … with 812 more rows

We will be cleaning the next dataset using a similar process snp.csv

``` r
snp_df = read_csv("./538_data/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month","day","year"))
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
snpmonth_df = 
    tibble(
        month = c("1","2","3","4","5","6","7","8","9","10","11","12"),
        month_name = month.name
    )

snp_df =
    left_join(snp_df, snpmonth_df, by = "month") %>% 
  select(year, close, month_name) %>% 
  relocate(year, month_name)
```

snp.csv unemployment.csv
